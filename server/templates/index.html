{% extends "layouts/base.html" %}
{% block content %}
<meta http-equiv="Content-Type" content="text/html" charset="utf-8" />

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<link href='http://fonts.googleapis.com/css?family=Montserrat:700' rel='stylesheet' type='text/css'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.1/jquery.form.min.js" integrity="sha384-tIwI8+qJdZBtYYCKwRkjxBGQVZS3gGozr3CtI+5JF/oL1JmPEHzCEnIKbDbLTCer" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-JAW99MJVpJBGcbzEuXk4Az05s/XyDdBomFqNlM3ic+I=" crossorigin="anonymous"></script>
<link href="../static/css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
<script type="text/javascript">
          $(document).ready(function (){
              $('#imageCarousel').carousel();
          });
</script>

<script type="text/javascript">
    function escapeRegExp(string){
        return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
    }
    function replaceAll(str, term, replacement) {
      return str.replace(new RegExp(escapeRegExp(term), 'g'), replacement);
    }
    function showNews(){
            var e = document.getElementById('contactForm2');
            if(e.style.display == null || e.style.display == "none") {
                e.style.display = "block";
            } else {
                e.style.display = "none";
            }
        }
    function showSummary(){
            var e = document.getElementById('contactForm');
            if(e.style.display == null || e.style.display == "none") {
                e.style.display = "block";
            } else {
                e.style.display = "none";
            }
        }
    function showArticle(body, title){
        var e3 = document.getElementById("summarytextarea");
        var e = document.getElementById("textarea");
        var e2 = document.getElementById("titlearea");
        console.log(body);
        var bodynew;
        var title;
        bodynew = replaceAll(body, '/n', '\n');
        e.value = bodynew;
        e2.value = title;
        e3.value = "";
        console.log(bodynew);

        }



</script>

<script type="text/javascript">
$(window).ready(function(){
$(".boton").wrapInner('<div class=botontext></div>');

    $(".botontext").clone().appendTo( $(".boton") );

    $(".boton").append('<span class="twist"></span><span class="twist"></span><span class="twist"></span><span class="twist"></span>');

    $(".twist").css("width", "25%").css("width", "+=3px");
});
$(document).ready(function() {
    var panels = $('.user-infos');
    var panelsButton = $('.dropdown-user');
    panels.hide();
    //Click dropdown
    panelsButton.click(function() {
        //get data-for attribute
        var dataFor = $(this).attr('data-for');
        var idFor = $(dataFor);
        //current button
        var currentButton = $(this);
        idFor.slideToggle(400, function() {
            //Completed slidetoggle
            if(idFor.is(':visible'))
            {
                currentButton.html('<i class="glyphicon glyphicon-chevron-up text-muted"></i>');
            }
            else
            {
                currentButton.html('<i class="glyphicon glyphicon-chevron-down text-muted"></i>');
            }
        })
    });
    $('[data-toggle="tooltip"]').tooltip();
});

$('#modal').on('show.bs.modal', function () {
       $(this).find('.modal-body').css({
              width:'auto',
              height:'auto',
              'max-height':'100%'
       });
});
 // $(function() {
 //       // bind 'myForm' and provide a simple callback function
 //       $('#myForm').ajaxForm(function() {
 //           alert("Thank you for choosing filter!");

 //       });
 //     });
function getval(sel)
{
    var start=sel.value;
    console.log(start);
}

</script>
</head>
        <!-- Jumbotron Header -->

        <body>
            <div class="row text-center", align='center'>
            <h2>Top Recent News</h2>
            <div class="container" name = "sliding">
                <div class="row">
              <div class="col-xs-12">
                  <div id="imageCarousel" class="carousel slide" data-interval="2000">
                      <ol class="carousel-indicators">
                          <li data-target="#imageCarousel" data-wrap="true" data-slide-to="0" class="active"></li>
                          <li data-target="#imageCarousel" data-slide-to="1"></li>
                          <li data-target="#imageCarousel" data-slide-to="2"></li>
                      </ol>
                    <div class="carousel-inner">

                        <div class="item active">
                            <div class="row">
                                <div class="col-xs-3">
                                    <div class="row">
                                        <div class="thumbnail" style="width:100%;height:300px">
                                            <img onclick="showArticle('{{active_topnews[0].body}}', '{{active_topnews[0].title}}')" src= "{{ active_topnews[0].image}}"" alt="Cinque Terre" style="width:100%;height:200px"  >
                                        <div class="caption" align = "center">
                                            <a href="{{ active_topnews[0].url }}" target="_blank"><b>{{active_topnews[0]["title"]}}</b></a>
                                        </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="col-xs-3">
                                        <div class="thumbnail" style="width:100%;height:300px">
                                            <img onclick="showArticle('{{active_topnews[1].body}}', '{{active_topnews[1].title}}')" src="{{ active_topnews[1].image}}"  alt="Cinque Terre" style="width:100%;height:200px">
                                        <div class="caption" align = "center">
                                            <a href="{{ active_topnews[1].url }}" target="_blank"><b>{{active_topnews[1]["title"]}}</b></a>
                                        </div>
                                        </div>
                                </div>
                                <div class="col-xs-3">
                                        <div class="thumbnail" style="width:100%;height:300px">
                                            <img onclick="showArticle('{{active_topnews[2].body}}', '{{active_topnews[2].title}}')" src="{{ active_topnews[2].image }}"  alt="Cinque Terre" style="width:100%;height:200px">
                                        <div class="caption" align = "center">
                                            <a href="{{ active_topnews[2].url }}" target="_blank"><b>{{active_topnews[2]["title"]}}</b></a>
                                        </div>
                                        </div>
                                </div>
                                      <div class="col-xs-3">
                                        <div class="thumbnail" style="width:100%;height:300px">
                                            <img onclick="showArticle('{{active_topnews[3].body}}', '{{active_topnews[3].title}}')" src="{{ active_topnews[3].image }}"  alt="Cinque Terre" style="width:100%;height:200px">
                                        <div class="caption" align = "center">
                                            <a href="{{ active_topnews[3].url }}" target="_blank"><b>{{active_topnews[3]["title"]}}</b></a>
                                        </div>
                                        </div>
                                </div>
                            </div>
                        </div>
                        {% for topnews in topnewslist %}
                        <div class="item">
                            <div class="row">
                                <div class="col-xs-3">
                                    <div class="row">
                                        <div class="thumbnail" style="width:100%;height:300px">
                                          <img onclick="showArticle('{{topnews[0].body}}', '{{topnews[0].title}}')" src="{{ topnews[0].image }}"  alt="Cinque Terre" style="width:100%;height:200px">

                                        <div class="caption" align = "center">
                                            <a href="{{topnews[0].url }}" target="_blank"><b>{{topnews[0]["title"]}}</b></a>
                                        </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="col-xs-3">
                                        <div class="thumbnail" style="width:100%;height:300px">
                                            <img onclick="showArticle('{{topnews[1].body}}', '{{topnews[1].title}}')" src="{{ topnews[1].image }}"  alt="Cinque Terre" style="width:100%;height:200px">


                                        <div class="caption" align = "center">
                                            <a href="{{topnews[1].url }}" target="_blank"><b>{{topnews[1]["title"]}}</b></a>
                                        </div>
                                        </div>
                                </div>
                                <div class="col-xs-3">
                                        <div class="thumbnail" style="width:100%;height:300px">
                                            <img onclick="showArticle('{{topnews[2].body}}', '{{topnews[2].title}}')" src="{{ topnews[2].image}}"  alt="Cinque Terre" style="width:100%;height:200px">
                                        <div class="caption" align = "center">
                                            <a href="{{topnews[2].url}}" target="_blank"><b>{{topnews[2]["title"]}}</b></a>
                                        </div>
                                        </div>
                                </div>
                                      <div class="col-xs-3">
                                        <div class="thumbnail" style="width:100%;height:300px">
                                            <img onclick="showArticle('{{topnews[3].body}}', '{{topnews[3].title}}')" src="{{ topnews[3].image }}"  alt="Cinque Terre" style="width:100%;height:200px">
                                        <div class="caption" align = "center">
                                            <a href="{{topnews[3].url}}" target="_blank"><b>{{topnews[3]["title"]}}</b></a>
                                        </div>
                                        </div>
                                </div>
                            </div>
                        </div>


                        {% endfor %}


                    </div>

                      <a href="#imageCarousel" class="carousel-control left" data-slide="prev">
                          <span class="glyphicon glyphicon-chevron-left"></span>
                      </a>
                      <a href="#imageCarousel" class="carousel-control right" data-slide="next">
                          <span class="glyphicon glyphicon-chevron-right"></span>
                      </a>
                  </div>
              </div>
                </div>
            </div>
        <hr>
    <div class="row text-center", align='center'>
        <form class="text-center" id="myForm" method="POST">
                Keyword:
                <input type="text" name="keyword">
                Topic:
               <select name ="topic" >
                    <option selected="selected"  disabled="disabled"></option>
                    <option value="politic">Politics</option>
                    <option value="sports">Sports</option>
                    <option value="business">Business</option>
                </select>
                Source:
                <select name ="source" >
                    <option selected="selected"  disabled="disabled"></option>
                    <option value="New York Times">New York Times</option>
                    <option value="BBC">BBC</option>
                    <option value="CNN">CNN</option>
                    <option value="Bloomberg">Bloomberg</option>
                </select>
                <input type="submit" name = "query" value="Go">
            <a type="submit" value="Submit"  data-toggle="modal" data-target="#myModal"> Recommendation </a>
            <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal">&times;</button>
                          <h4 class="modal-title">Recommended News</h4>
                        </div>
                        <div class="modal-body">
                            <div class="well col-xs-8 col-sm-8 col-md-8 col-lg-8 col-xs-offset-2 col-sm-offset-2 col-md-offset-2 col-lg-offset-2">
                                <form name="news_recommend" class="form-horizontal"  role="form", method="post" action="{{ url_for('home') }}">
                                {% for news in newslist %}
                                 <div class="row">
                                    <div class = "col-md-4 hero-feature">
                                        <img src="{{news.image}}"  alt="Cinque Terre" style="width:100px;height:100px">

                                    </div>
                                    <div class="col-md-8 hero-feature">
                                        <div class = "col-md-2 hero-feature">
                                            <input class="check" type="checkbox" name="{{news.title}}/{{news.uri}}" value= check>
                                        </div>
                                        <div class = "col-md-10 hero-feature">
                                            <a href="{{news.url }}" target="_blank" align="left"><b>{{news.title}}</b></a>
                                        </div>
                                    </div>

                                </div>

                                {% endfor %}
                                <th><b> <input class="btn btn-primary btn-lg" type="submit" name="newsrecommend" value="Select"/></b></th>
                                </form>
                            </div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>

                </div>
            </div>


        </form>
        <br>
    </div>
    <br>
    <hr>
       <div class="row text-center", align='center'>
        <div class="col-md-7 hero-feature">
            <div class="row text-center", align='center'>
                <form class="text-center" id="myForm" method="POST">
                    Summary sentence length:
                    <input type="text" name="length" size="8" placeholder = "3">      
                    <input type="submit" value="summary" class="formBtn active" name = "summary">
                    <input type="submit" name="next" value="Next News"/>
                    <br>
                 
                    <a class="list-group-item text-center list-group-item" id="postItem" onclick="showNews()"><p style="font-size:18px"><b>Selected Article</b></p></a>
                <div id="contactForm2" style="display: block;">
                                <div class="thumbnail">
                                       <div class="form-group">
                                        <textarea  id="titlearea" name ="title" class="form-control" id="exampleTextarea" rows="1";resize: none; style="font-weight: bold; font-style: italic;">{{title}}</textarea>
                                        <textarea id="textarea" name ="article_text" class="form-control" id="exampleTextarea" rows="100" style="overflow: scroll;height: 500px;resize: none; ">{{article}}</textarea>
                                        </div>
                                </div>
                </div>

                </form>



            </div>
        </div>
        <div class="col-md-1 hero-feature">
        </div>
        <div class="col-md-4 hero-feature">
            <br>
            <div class="row text-center", align='center'>
                   <a class="list-group-item text-center list-group-item" id="postItem" onclick="showSummary()"><p style="font-size:18px"><b>Summary Article</b></p></a>
                   <div id="contactForm" style="display: block;">

                                <div class="thumbnail">
                                       <div class="form-group">
                                        <textarea class="form-control" id="summarytextarea" rows="3" style="overflow: scroll;height: 300px;resize: none; ">{{summary_text}}</textarea>
                                        </div>
                                </div>


                    </div>
            </div>
        </div>
    </div>


</body>

<style>
.textarea {
    overflow-y: scroll;
    resize: none; /* Remove this if you want the user to resize the textarea */
}
    .boton {
        width: 200px;
        height: 50px;
        margin: 0px auto;
        display: block;
        position: relative;
    }

    .botontext {
        position: absolute;
        height: 100%;
        width: 100%;
        z-index: 1;
        text-align: center;
        line-height: 50px;
        font-family: 'Montserrat', sans-serif;
        font-size: 12px;
        text-transform: uppercase;
    }

    .twist {
        display: block;
        height: 100%;
        width: 25%;
        position: relative;
        float: right;
        margin-left: -4px;
    }

    .twist:before {
        content: "";
        width: 100%;
        height: 100%;
        background: #1f1d21;
        bottom: 100%;
        position: absolute;
        transform-origin: center bottom 0px;
        transform: matrix3d(1, 0, 0, 0,
                            0, 0, -1, -0.003,
                            0, 1, 0, 0,
                            0, 0, 0, 1);

-webkit-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
   -moz-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
     -o-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
        transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995); /* custom */
    }

    .twist:after {
        content: "";
        position: absolute;
        width: 100%;
        top: 100%;
        height: 100%;
        background: #1f1d21;
        transform-origin: center top 0px;
        transform: matrix3d(1, 0, 0, 0,
                            0, 1, 0, 0,
                            0, 0, 1, -0.003,
                            0, -50, 0, 1);

-webkit-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
   -moz-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
     -o-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
        transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995); /* custom */
    }

    .boton:hover .twist:before {
        background: #fff;
        transform: matrix3d(1, 0, 0, 0,
                            0, 1, 0, 0,
                            0, 0, 1, 0.003,
                            0, 50, 0, 1);
    }

    .boton:hover .twist:after {
        background: #dedae1;
        transform: matrix3d(1, 0, 0, 0,
                            0, 0, -1, 0.003,
                            0, 1, 0, 0,
                            0, 0, 0, 1);
    }
    .boton .twist:nth-of-type(1) {
        margin-left: 0;
    }

    .boton .twist:nth-of-type(1):before,
    .boton .twist:nth-of-type(1):after {
        transition-delay: 0s;
    }

    .boton .twist:nth-of-type(2):before,
    .boton .twist:nth-of-type(2):after {
        transition-delay: 0.1s;
    }

    .boton .twist:nth-of-type(3):before,
    .boton .twist:nth-of-type(3):after {
        transition-delay: 0.2s;
    }

    .boton .twist:nth-of-type(4):before,
    .boton .twist:nth-of-type(4):after {
        transition-delay: 0.3s;
    }

    .boton .botontext:nth-of-type(1) {
        color: #3d3b40;
        bottom: 100%;
        transform-origin: center bottom 0px;
        transform: matrix3d(1, 0, 0, 0,
                            0, 0, -1, -0.003,
                            0, 1, 0, 0,
                            0, 0, 0, 1);

-webkit-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
   -moz-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
     -o-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
        transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995); /* custom */
    }

    .boton:hover .botontext:nth-of-type(1) {
        transform: matrix3d(1, 0, 0, 0,
                            0, 1, 0, 0,
                            0, 0, 1, 0.003,
                            0, 50, 0, 1);
    }

    .boton .botontext:nth-of-type(2) {
        color: #fff;
        top: 100%;
        transform-origin: center top 0px;
        transform: matrix3d(1, 0, 0, 0,
                            0, 1, 0, 0,
                            0, 0, 1, -0.003,
                            0, -50, 0, 1);

-webkit-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
   -moz-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
     -o-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
        transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995); /* custom */
    }

    .boton:hover .botontext:nth-of-type(2) {
        transform: matrix3d(1, 0, 0, 0,
                            0, 0, -1, 0.003,
                            0, 1, 0, 0,
                            0, 0, 0, 1);
    }
    /*MENU*/

    .square {
        border: 1px solid #1f1d21;
        height: 26px;
        width: 26px;
        display: block;
        margin: 0px auto;
        transform: rotate(45deg);
        overflow: hidden;

-webkit-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
   -moz-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
     -o-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
        transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995); /* custom */
    }

    .square .burgerwrap {
        height: 18px;
        width: 21px;
        transform: rotate(-45deg);
        padding-left: 5px;
        padding-top: 8px;

-webkit-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
   -moz-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
     -o-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
        transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995); /* custom */
    }

    .square:hover {
        transform: rotate(135deg);
        border: 1px solid #fff;
    }

    .square:hover .burgerwrap {
        transform: rotate(-135deg)
    }

    .square span {
        height: 2px;
        width: 14px;
        background: #1f1d21;
        display: block;
        margin-bottom: 2px;

-webkit-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
   -moz-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
     -o-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
        transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995); /* custom */
    }

    .square span:after {
        content: "";
        height: 2px;
        width: 14px;
        position: absolute;
        background: #fff;
        left: -19px;

-webkit-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
   -moz-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
     -o-transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995);
        transition: all 500ms cubic-bezier(0.970, 0.000, 0.395, 0.995); /* custom */
    }

    .square:hover span {
        margin-left: 26px;
    }

    .square:hover span:after {
        left: 5px;
    }

    .square span:nth-of-type(1),
    .square span:nth-of-type(1):after {
        transition-delay: 0.1s;
    }

    .square span:nth-of-type(2),
    .square span:nth-of-type(2):after {
        transition-delay: 0.2s;
    }

    .square span:nth-of-type(3),
    .square span:nth-of-type(3):after {
        transition-delay: 0.3s;
    }
    .user-row {
    margin-bottom: 0px auto;
}
.user-row:last-child {
    margin-bottom: 0px auto;
}
div.sliding {
    width: 500px;
    height: 1000px;
    margin: auto;
    border: 3px solid #73AD21;
}
.dropdown-user {
    margin: 0px auto;
    padding: 5px;
    height: 50%;
}
.dropdown-user:hover {
    cursor: pointer;
}
.table-user-information > tbody > tr {
    border-top: 1px solid rgb(221, 221, 221);
}
.table-user-information > tbody > tr:first-child {
    border-top: 0;
}
.table-user-information > tbody > tr > td {
    border-top: 0;
}
.modal-body {
    position: relative;
    overflow-y: auto;
    max-height: 400px;
    padding: 15px;
}
.vertical-align {
    display: flex;
    align-items: center;
}
</style>
{% endblock %}
